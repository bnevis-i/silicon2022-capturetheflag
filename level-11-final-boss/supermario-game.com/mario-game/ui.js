var loadstart,isLocal,elemGame,game,body,elemSelect,game_iframe=document.getElementById("game"),ppressed=!1,keyd=new KeyboardEvent("keydown",{bubbles:!0,cancelable:!0,keyCode:68}),sound_toggle=document.getElementById("sound-toggle"),muteBool="Off";game_iframe.contentWindow.customMute=!1,localStorage.getItem("custom_mute")?(localStorage.removeItem("custom_mute"),setTimeout((function(){localStorage.setItem("custom_mute","Off")}),10)):localStorage.setItem("custom_mute","Off");var applyOnceBool=!0;function soundMute(){sound_toggle.innerHTML='<div class="label">'+document.getElementById("off-button").innerHTML+"</div>",game_iframe.contentWindow.customMute=!0,game.AudioPlayer.pause(),localStorage.setItem("custom_mute","On")}function soundUnmute(){sound_toggle.innerHTML='<div class="label">'+document.getElementById("on-button").innerHTML+"</div>",game_iframe.contentWindow.customMute=!1,game.AudioPlayer.resume(),localStorage.setItem("custom_mute","Off")}function start(){if(!window.loadstart){window.loadstart=!0,setLocalStatus(),setReferences(),setMapSelector(),setLevelEditor(),setOptions(),setKeyMappingMenu(),setInterval(checkFocus,500),soundUnmute(),game_iframe.contentDocument.addEventListener("keydown",(event=>{80===event.keyCode&&(ppressed=!0),applyOnceBool&&("Off"==muteBool&&(68!==event.keyCode&&39!==event.keyCode||soundUnmute()),applyOnceBool=!1)}));var last_power=1;is_mobile&&setInterval((function(){last_power!=game.player.power&&(game.player.power>2?game_iframe.contentDocument.getElementById("move-fire").style.display="block":game_iframe.contentDocument.getElementById("move-fire").style.display="none"),last_power=game.player.power}),500),is_fullscreen&&(game_iframe.contentDocument.getElementById("explanation").style.display="block")}}sound_toggle&&(sound_toggle.addEventListener("mousedown",(function(event){game_iframe.contentDocument.getElementById("paused")&&(game_iframe.contentDocument.getElementById("paused").style.display="none"),game_iframe.focus(),"On"==muteBool?(soundUnmute(),muteBool="Off"):(soundMute(),muteBool="On")})),sound_toggle.addEventListener("mouseup",(function(event){game_iframe.contentDocument.getElementById("paused")&&(game_iframe.contentDocument.getElementById("paused").style.display="none"),game_iframe.focus()})));var game_paused=!1;function checkFocus(){ppressed||(document.activeElement!=document.getElementById("game")?(game.paused||game.pause(),game_iframe.contentDocument.getElementById("paused").style.display="flex",game_paused=!0):(game.paused&&game.unpause(),game_iframe.contentDocument.getElementById("paused").style.display="none",game_paused=!1))}function setLocalStatus(){window.isLocal="file://"==window.location.origin}function setReferences(){window.elemGame=document.getElementById("game"),window.game=window.elemGame.contentWindow,isLocal||(window.game.parentwindow=window),window.body=document.body,window.elemSelect=document.getElementById("in_mapselect")}function setMapSelector(timed){window.elemSelect||timed||setTimeout((function(){setMapSelector(!0)}),350);var i,j,elem,innerHTML="";for(i=1;i<=8;++i)for(j=1;j<=4;++j)innerHTML+=createAdderMap(i,j);if(elemSelect.innerHTML+=innerHTML+createAdderBigMap("Map Generator!","setGameMapRandom"),!isLocal)for(game.parentwindow=window,i=1;i<=8;++i)for(j=1;j<=4;++j)game["World"+i+String(j)]&&(elem=document.getElementById("maprect"+i+","+j))&&(elem.className="maprect")}function createAdderMap(i,j){var adder="";return adder+="<div class='maprectout'>",adder+="<div id='maprect"+i+","+j,adder+="' class='maprect"+(isLocal?"":" off")+"' onclick='setGameMap("+i+","+j+")'>",adder+=i+"-"+j,adder+="</div></div>"}function createAdderBigMap(name,onclick,giant){var adder="";return adder+="<div class='maprectout'>",adder+="<div class='maprect big "+(giant?"giant":"")+"' onclick='"+onclick+"()'>",adder+=name,adder+="</div></div>"}function setGameMap(one,two){"maprect"==document.getElementById("maprect"+one+","+two).className&&(game.postMessage({type:"setMap",map:[one,two]},"*"),game.focus())}function onMapLoad(one,two){var elem=document.getElementById("maprect"+one+","+two);elem&&(elem.className="maprect")}function setGameMapRandom(){game.postMessage({type:"setMap",map:["Random","Overworld"]},"*"),game.focus()}function setLevelEditor(){var out=document.getElementById("in_editor");button=createAdderBigMap("Make your<br />own levels!","startEditor",!0),out.innerHTML+="Why use Nintendo's?<br />"+button+"<br />You can save these as text files when you're done."}function startEditor(){game.postMessage({type:"startEditor"},"*"),game.focus()}function setOptions(){var option,i,out=document.getElementById("in_options"),options=["Mute","Luigi","FastFWD"],innerHTML="";for(i in options)innerHTML+="<div class='maprectout' onclick='toggleGame(\""+(option=options[i])+"\")'><div class='maprect big larger'>Toggle "+option+"</div></div>",innerHTML+="<br />";out.innerHTML+=innerHTML+"<br />More coming soon!"}function setKeyMappingMenu(){var key,low,i,out=document.getElementById("in_keymapping"),keys=["Up","Down","Left","Right","Sprint","Pause","Mute"],innerHTML="";for(i in keys)low=(key=keys[i]).toLowerCase(),innerHTML+="<div class='maprectout'><div class='maprect big larger'>"+key+"<input onkeydown='setKey(event)' type='texte' id='"+low+"' readonly></input></div></div>",innerHTML+="<br />";innerHTML+="<br />",out.innerHTML+=innerHTML}function setKey(event){game.postMessage({type:"setKey",action:event.target.id,keyCode:event.keyCode},"*"),event.target.value=event.keyCode}function toggleGame(me){game.postMessage({type:"toggleOption",option:me},"*")}function setCheats(){for(var i in console.log("Hi, thanks for playing Full Screen Mario! I see you're using the console."),console.log("There's not really any way to stop you from messing around so if you'd like to know the common cheats, enter \"displayCheats()\" here."),window.cheats={Change_Map:"game.setMap([#,#] or #,#);",Change_Map_Location:"game.shiftToLocation(#);",Fast_Forward:"game.fastforward(amount; 1 by default);",Life:"game.gainLife(# amount or Infinity)",Low_Gravity:"game.player.gravity = game.gravity /= 2;",Lulz:"game.lulz();",Random_Map:"game.setMapRandom();",Shroom:"game.playerShroom(game.player)",Star_Power:"game.playerStar(game.player)",Unlimited_Time:"game.data.time.amount = Infinity;"},cheatsize=0,cheats)cheatsize=Math.max(cheatsize,i.length)}function displayCheats(){for(i in console.log("These are stored in the global 'cheats' object, by the way."),cheats)printCheat(i,cheats[i]);return"Have fun!"}function printCheat(name,text){for(i=cheatsize-name.length;i>0;--i)name+=".";console.log(name.replace("_"," ")+"...... "+text)}