function loadEditor(noreset){editorClose(),noreset||(window.canedit=!0,setMap(["Special","Blank"]),window.canedit=!1),setEditorLibrary(),setEditorHTML(),setEditorControls(),setEditorTriggers(),setEditorLocalRetrieval(),classAdd(body,"editor"),classAdd(editor.sidebar,"expanded"),TimeHandler.addEvent(classRemove,35,editor.sidebar,"expanded"),map.shifting=!1,window.editing=!0}function setEditorLibrary(){window.editor={xloc:0,yloc:0,playing:!1,canplace:!0,offset:{x:unitsizet2},settings:{night:!1,setting:"Overworld",alt:!1},defaults:{width:8,height:8,widthoff:0,heightoff:0,minimum:1,followerUpdate:editorFollowerUpdateStandard,prefunc:pushPreThing,outerok:!0},placed:[],characters:{Goomba:{},Koopa:{height:12,arguments:{smart:Boolean,movement:["moveSimple","moveJumping","moveFloating"]},followerUpdate:function(reference,pairs){var smart="True"==pairs.smart,fname=pairs.movement,func="moveJumping"==fname;return"moveFloating"==fname&&(func=[8,72]),[smart,func]},onadds:{nocollide:!1}},Beetle:{width:8.5,height:8.5},HammerBro:{height:12},CheepCheep:{arguments:{smart:Boolean},attributes:{nofall:!0}},Lakitu:{height:12},Podoboo:{width:7},Blooper:{height:12,onadds:{nofall:!0}},Bowser:{width:16,height:16}},solids:{Floor:{arguments:{width:8},mydefaults:{width:8},prefunc_custom:function(prestatement,placer,reference,args){var output="Floor, "+prestatement.xloc+", "+prestatement.yloc;return args[1]&&(output+=", "+args[1]),output}},Brick:{arguments:{contents:["false","Coins","Star"]},followerUpdate:function(reference,pairs){var output=[];pairs.contents;return output.push(window[pairs.contents]),output},prefunc_custom:function(prestatement,placer,reference,args){var output="Brick, ";return output+=prestatement.xloc+", "+prestatement.yloc,placer.contents&&(output+=", "+placer.contents[0].name),output}},Block:{arguments:{contents:["Coin","Mushroom","Star","1Up Mushroom"],hidden:Boolean},followerUpdate:function(reference,pairs){var output=[];return"1Up Mushroom"==pairs.contents?output.push([Mushroom,1]):output.push(window[pairs.contents]),"True"==pairs.hidden&&(TimeHandler.addEvent((function(){editor.follower.hidden=!0})),output.push(1)),output},prefunc_custom:function(prestatement,placer,reference,args){var output="Block, ",contents=placer.contents,contained=contents[0].name;return output+=prestatement.xloc+", "+prestatement.yloc,"Coin"!=contained?("Mushroom"==contained&&contents[1]?output+=", [Mushroom, "+String(contents[1])+"]":output+=", "+contained,placer.hidden&&(output+=", true")):placer.hidden&&(output+=", false, true"),output}},Cannon:{arguments:{height:8},sprite_source:"top"},Pipe:{width:16,prefunc:pushPrePipe,prefunc_solo:!0,arguments:{height:8,Pirhana:Boolean},followerUpdate:function(reference,pairs){var output=[];return output.push(Number(pairs.height)),output.push(Boolean(pairs.Pirhana)),output},sprite_source:"top"},Stone:{arguments:{width:8,height:8},prefunc_custom:function(prestatement,placer,reference,args){var output="Stone, "+prestatement.xloc+", "+prestatement.yloc;return output+=", "+args[1]+", "+args[2]}},Coral:{arguments:{height:8}},CastleBlock:{arguments:{fireballs:2,direction:["CW","CCW"],hidden:Boolean},followerUpdate:function(reference,pairs){return[[Number(pairs.fireballs),"CW"==pairs.direction],"True"==pairs.hidden]}},Springboard:{height:14.5,heightoff:1.5}},scenery:{Bush1:{width:16},Bush2:{width:24},Bush3:{width:32},Cloud1:{width:16,height:12},Cloud2:{width:24,height:12},Cloud3:{width:32,height:12},HillSmall:{width:24,height:9.5,heightoff:-1.5},HillLarge:{width:40,height:17.5,heightoff:-1.5},PlantSmall:{width:7,height:15,heightoff:1},PlantLarge:{height:23,heightoff:1},Fence:{},Water:{width:4,height:4,prefunc:fillPreWater,prefunc_solo:!0,prefunc_custom:function(prestatement,placer,reference,args){return prestatement.xloc+", "+prestatement.yloc}}}};var group,me,i,j;editor.defaults;for(i in editor)for(j in group=editor[i],editor[i])me=group[j],proliferate(me,editor.defaults,!0);for(i in group=editor.scenery)me=group[i],proliferate(me,{createfunc:function(me){return ThingCreate(Sprite,me.spritename)},spritename:i,prefunc_custom:function(prestatement,placer,reference,args){return"'"+reference.spritename+"', "+prestatement.xloc+", "+(prestatement.yloc-reference.height)}},!0),me.prefunc==pushPreThing&&(me.prefunc=pushPreScenery)}function setEditorHTML(){createEditorGuideLines(),createEditorSidebar(),createEditorBottomBar(),createEditorScrollers(),editor.sectionselect.onchange()}function createEditorSidebar(){var i,optionNames=["Solids","Characters","Scenery","Settings"],sidebar=editor.sidebar=createElement("div",{id:"sidebar"}),category=editor.category=createElement("div",{id:"category",className:"group first"}),sectionselect=editor.sectionselect=createElement("select",{id:"sectionselect",className:"options big",onchange:editorSelectSection}),options=editor.options=createElement("div",{id:"options",className:"options big"});for(i in sidebar.appendChild(category),category.appendChild(sectionselect),optionNames)sectionselect.appendChild(createElement("option",{innerText:optionNames[i]}));sidebar.appendChild(options),body.appendChild(window.sidebar=sidebar)}function createEditorBottomBar(){var bar=editor.bottombar=createElement("div",{id:"bottombar",things:{}});sidebar.appendChild(bar)}function createEditorScrollers(){var i,parent,div,names=["right","left"],scrollers={};for(parent=createElement("div",{id:"scrollers",style:{zIndex:7,width:innerWidth-32+"px"}}),settings={className:"scroller",style:{zIndex:7,marginTop:innerHeight/2+"px"},onmouseover:editorFollowerHide,onmouseout:editorFollowerShow,onmousedown:editorScrollingStart,onmouseup:editorScrollingStop},i=names.length-1;i>=0;--i)names[i],div=scrollers[names[i]]=createElement("div",settings),parent.appendChild(div);proliferate(scrollers.left,{id:"left",className:"scroller flipped off",dx:-7}),proliferate(scrollers.right,{id:"right",style:{right:"21px"},dx:7}),editor.scrollers=scrollers,body.appendChild(parent)}function editorFollowerHide(){var follower=editor.follower;follower.hiddenOld=follower.hidden,follower.hidden=!0}function editorFollowerShow(){var follower=editor.follower;follower.hidden=follower.hiddenOld}function editorScrollingStart(event){var dx=event.target.dx;editorPreventClicks(),editor.scrolling=TimeHandler.addEventInterval(editorScrolling,1,1/0,-dx),classRemove(editor.scrollers.left,"off")}function editorScrollingStop(){TimeHandler.addEvent(editorClickOff,3),TimeHandler.clearEvent(editor.scrolling)}function editorScrolling(dx){if(scrollEditor(dx),editor.xloc>=0)return scrollEditor(-editor.xloc),editorScrollingStop(),classAdd(editor.scrollers.left,"off"),!0}function createEditorGuideLines(){var i,parent,line,lines={floor:0,ceiling:ceillev,jumplev1:jumplev1,jumplev2:jumplev2},left=16*unitsize+"px",floor=map.floor;for(i in window.maplines=parent=document.createElement("div"),parent.style.marginLeft=left,parent.id="maplines",lines)line=createElement("div",{innerText:i,className:"mapline",id:i+"_line",style:{marginTop:(floor-lines[i])*unitsize+"px",marginLeft:"-"+left,paddingLeft:left}}),parent.appendChild(line);body.appendChild(parent)}function setEditorControls(names){names=names||["load","save","reset","undo"];var name,div,i,previous=document.getElementById("controls"),container=createElement("div",{id:"controls"}),controls=editor.controls={container:container};for(i in previous&&(previous.innerHTML=""),names)name=names[i],div=createElement("div",{id:name,alt:name,className:"control",style:{backgroundImage:"url(Theme/"+name+".gif)"},innerHTML:"<div class='controltext'>"+name+"</div>",onclick:editorClickControl}),container.appendChild(div),controls[name]=div;sidebar.appendChild(container)}function setEditorTriggers(){var i,activators=[maplines,canvas];for(i=activators.length-1;i>=0;--i)activators[i].onclick=editorMouseClick;document.onmousemove=editorFollowerFollowsCursor}function editorMouseClick(event){if(window.editing&&!editor.clicking){if(editorPreventClicks(),editor.erasing)return editorPlaceEraser(event);if(!editor.in_settings&&editor.canplace){var section_name=editor.section_name,follower_old=(window[section_name],editor.current_selected,editor.follower);editor.placed.push(follower_old),editor.follower=!1,editorSetCurrentThingFromName(null,!0),paused&&refillCanvas(),follower_old.was_follower=!0,delete follower_old.onclick,editor.playing&&(thingRetrieveVelocity(follower_old),proliferate(follower_old,follower_old.reference.attributes))}}}function editorSelectSection(){var selected=(this||editor.sectionselect).value.toLowerCase();(editor.in_settings="settings"==selected)?(editorSetSection(selected,!0),editorSetSectionSettings()):editorSetSection(selected)}function editorSetSection(name,nothing){var canv_sel,canv,section=editor.section=editor[name],bottombar=editor.bottombar,num_kids=0;if(editor.section_name=name,bottombar.innerHTML="",!nothing)for(name in section)++num_kids,canv=editorAddBottomPreview(bottombar,name,section[name]),canv_sel||(canv_sel=canv);num_kids?(bottombar.style.visibility="visible",editorSetCurrentThingFromCanvas(canv_sel)):bottombar.style.visibility="hidden"}function editorAddBottomPreview(bottombar,name,ref){var csource,width=ref.width,height=ref.height,thingfunc=window[name],thing=thingfunc?ThingCreate(thingfunc,ref.previewargs):new Thing(Sprite,name),holder=createElement("div",{width:width*unitsize+"px",height:height*unitsize+"px",name:name,className:"holder "+name,onclick:editorSetCurrentThing}),canvas=proliferate(getCanvas(width*unitsizet2,height*unitsizet2),{name:name,reference:ref,style:{marginLeft:-roundDigit(width/2,scale)+"px"},onclick:editorSetCurrentThing}),sizewidth=(bottombar.things,width*unitsizet2),sizeheight=height*unitsizet2,context=canvas.getContext("2d");return canvasDisableSmoothing(canvas),editor.bottombar.things[name]=canvas.thing=thing,addClass(thing,"editor"),csource=thing.canvas,thing.canvases&&(csource=thing.canvases[ref.sprite_source||"middle"].canvas),ref.previewsize?(context.fillStyle=context.createPattern(csource,"repeat"),context.fillRect(0,0,sizewidth,sizeheight)):context.drawImage(csource,0,0,sizewidth,sizeheight),holder.appendChild(holder.canvas=canvas),bottombar.appendChild(holder),bottombar[name]=holder,canvas}function editorSetSectionSettings(){var rows,settings=editor.settings,html="<table>";html+="<h3 class='title'>Settings</h3>",html+=addArgumentOption("night",Boolean,settings.night),html+=addArgumentOption("setting",["Overworld","Underworld","Underwater","Castle","Sky"],settings.setting),html+=addArgumentOption("alt",Boolean,settings.alt),html+="</table>",options.innerHTML=html,ensureOptionsAboveZero(editorUpdateSettingsOption),rows=editor.sidebar.getElementsByTagName("table")[0].rows,editor.settings.night_elem=rows[0].cells[1].firstChild,editor.settings.setting_elem=rows[1].cells[1].firstChild,editor.settings.alt_elem=rows[2].cells[1].firstChild,editor.follower&&killNormal(editor.follower),editor.follower=!1}function editorUpdateSettingsOption(event){var settings=editor.settings,night=settings.night="True"==settings.night_elem.value,alt=settings.alt="True"==settings.alt_elem.value,newsetting=(settings.setting=settings.setting_elem.value)+(night?" Night":"")+(alt?" "+alt:"");setAreaSetting(area,newsetting,newsetting!=area.setting)}function editorSetCurrentThing(event,sameargs){var self=event.target,name=editor.current_thing_name=self.name,refs=editor.current_thing=editor.section[name];sameargs||updateCurrentArguments(name,refs),editorUpdateFollower()}function editorSetCurrentThingFromCanvas(canv,sameargs){editorSetCurrentThing({target:canv},sameargs)}function editorSetCurrentThingFromName(name,sameargs){editorSetCurrentThing({target:{name:name||editor.current_thing_name}},sameargs)}function updateCurrentArguments(name,reference){reference=reference||{};var i,options=editor.options,html="<table>",mydefaults=reference.mydefaults||{},args=reference.arguments||{};for(i in html+="<h3 class='title'>"+name+"</h3>",args.width||(html+=addStaticOption("width",reference.width)),args.height||(html+=addStaticOption("height",reference.height)),args)html+=addArgumentOption(i.replace("_","-"),args[i],null,mydefaults);html+="</table>",options.innerHTML=html,ensureOptionsAboveZero()}function addStaticOption(name,value){return value==1/0&&(value="Inf."),"<tr id='option_"+name+"' class='auto'><td>"+name+": </td><td class='auto'>"+value+"</td></tr>"}function addArgumentOption(name,value,ref,mydefaults){mydefaults=mydefaults||{};var text="<tr name='"+name+"' id='option_"+name+"'><td>"+name+": </td><td>";switch(value){case 1/0:text+="Inf";break;case Boolean:text+="<select name='"+name+"' value='"+(value?"true":"false")+"'><option>False</option><option>True</select>";break;case Number:text+="<input name='"+name+"' value='"+String(value||0)+"' type='Number'>";break;default:switch(typeof value){case"number":text+="<span class='optspan'>"+value+"x</span><input name='"+name+"' type='Number' class='text' value='"+(mydefaults[name]||1)+"'>";break;case"string":text+="<input name='"+name+"' type='text' class='text wide' value='"+value+"'>";break;case"object":for(i in text+="<select name='"+name+"'>",value)text+="<option>"+value[i]+"</option>";text+="<select>"}}return text+"</td></tr>"}function ensureOptionsAboveZero(updatefunc){updatefunc=updatefunc||editorUpdateFollower;var element,elements=editor.options.getElementsByTagName("input");for(i=elements.length-1;i>=0;--i)(element=elements[i]).onchange=element.onclick=element.onkeypress=editorInputEnsureAboveZero;for(elements=options.getElementsByTagName("select"),i=elements.length-1;i>=0;--i)(element=elements[i]).onchange=element.onclick=element.onkeypress=editorUpdateFollower}function editorInputEnsureAboveZero(event){editorUpdateFollower(event)}function editorUpdateFollower(event){if(editor.in_settings)return editorUpdateSettingsOption(event);var follower,current_thing=editor.current_thing;(follower=editor.follower)&&(follower.id="",killNormal(follower)),follower=current_thing.createfunc?current_thing.createfunc(editor.current_thing,editorGetArguments()):ThingCreate(window[editor.current_thing_name],current_thing.followerUpdate(editor.current_thing,editorGetArguments())),editor.follower=follower,proliferate(follower,{id:"follower",libtype:editor.section_name,lookleft:!0,nocollide:!0,reference:current_thing,onclick:editorMouseClick},!0),addThing(follower),addClass(follower,"editor"),thingRetrieveVelocity(follower),thingStoreVelocity(follower),editorSetFollowerPosition(follower),editor.erasing&&(follower.hidden=!0)}function editorGetArguments(){var inputs=arrayMake(editor.options.getElementsByTagName("input")),selects=arrayMake(editor.options.getElementsByTagName("select")),combined=inputs.concat(selects);return pairs=generateInputNameValuePairs(combined),pairs}function generateInputNameValuePairs(inputs){var i,output={};for(i in inputs)output[inputs[i].name]=inputs[i].value;return output}function editorFollowerFollowsCursor(event){var follower=editor.follower;follower&&editorSetFollowerPosition(follower,roundFollowerDigit(event.x)+(editor.current_thing.widthoff-editor.offset.x)*unitsize,roundFollowerDigit(event.y)+editor.current_thing.heightoff*unitsize)}function editorSetFollowerPosition(follower,xloc,yloc){xloc=xloc||editor.xloc_old||0,yloc=yloc||editor.yloc_old||0,setLeft(follower,xloc),setTop(follower,yloc),editor.xloc_old=xloc,editor.yloc_old=yloc}function roundFollowerDigit(num){var diff="solids"==editor.section_name?8:4;return unitsize*diff*round(num/(unitsize*diff))}function roundFollowerPosition(me,num){editorSetFollowerPosition(me,roundFollowerDigit(me.left),roundFollowerDigit(me.top))}function editorFollowerUpdateStandard(reference,pairs){"True"==pairs.hidden&&TimeHandler.addEvent((function(){editor.follower.hidden=!0}));var output=[];return pairs.width&&output.push(Number(pairs.width)),pairs.height&&output.push(Number(pairs.height)),output}function editorClickControl(event){editorPreventClicks();var target=event.target;target.id||(target=target.parentNode),window["editorControl"+capitalizeFirst(target.id)](),event.preventDefault()}function editorPreventClicks(){editor.clicking=!0,TimeHandler.addEvent(editorClickOff,3)}function editorClickOff(){window.editor&&(editor.clicking=!1)}function editorControlUndo(){var last=editor.placed.pop();last&&!last.player&&killNormal(last)}function editorControlReset(){var len=editor.placed.length,timer=roundDigit(35/len,21);TimeHandler.addEventInterval(editorControlUndo,timer,len)}function editorControlSave(){var rawfunc=editor.rawfunc=editorGetRawFunc();editorCreateInputWindow("<span style='font-size:1.4em;'>Hit Submit below to start playing!</span><br><p style='font-size:.7em;line-height:140%'>This map will be resumed automatically the next time you use the editor on this computer.<br>Alternately, you may copy this text to work on again later using Load (the button next to Save). </p>",rawfunc,editorSubmitGameFuncPlay);return rawfunc}function editorControlCancel(){loadEditor()}function editorGetRawFunc(){var i,placed=editor.placed,lenm1=placed.length-1,statements=new Array(i),rawfunc="  var map = arguments[0] || new Map();\n";for(rawfunc+="\n  map.time = "+data.time.amount+";",rawfunc+="\n  map.locs = [ new Location(0, true) ];",rawfunc+="\n  map.areas = [",rawfunc+="\n    new Area('"+area.setting+"', function() {",rawfunc+="\n      setLocationGeneration(0);\n\n",i=lenm1;i>=0;--i)statements[i]=new editorPreStatement(placed[i]);for(statements.sort(prethingsorter),i=lenm1;i>=0;--i)statements[i]="      "+statements[i].statement;return rawfunc+=(statements=removeDuplicates(statements)).join("\n"),rawfunc+="\n    })",rawfunc+="\n  ];",rawfunc+="\n  return map;"}function editorPreStatement(placer){this.placer=placer,this.xloc=(gamescreen.left+placer.left)/unitsize,this.yloc=map.floor-placer.top/unitsize,this.statement=editorGetStatement(this,placer,placer.reference,placer.args)}function editorGetStatement(prestatement,placer,reference,args){if(!reference&&!(reference=editor[placer.libtype][placer.title]))return"";var argstrings,arg,statement=(reference.prefunc||pushPreThing).name,numargs=args.length;if(reference.prefunc_custom)statement+="("+reference.prefunc_custom(prestatement,placer,reference,args)+");";else{argstrings=[],reference.prefunc_solo||argstrings.push(placer.title),argstrings.push(String(prestatement.xloc)),argstrings.push(String(prestatement.yloc));for(var i=1;i<numargs;++i){switch(typeof(arg=args[i])){case"undefined":break;case"number":arg=String(round(arg));break;default:arg=String(arg)}void 0!==arg&&argstrings.push(arg)}statement+="("+argstrings.join(", ")+");"}return statement}function editorControlErase(){editor.erasing?editorControlEraseOff():editorControlEraseOn()}function editorControlEraseOn(){editor.erasing=editor.follower.hidden=!0,classAdd(body,"erasing"),classAdd(editor.controls.erase,"enabled")}function editorControlEraseOff(){editor.erasing=editor.follower.hidden=!1,classRemove(body,"erasing"),classRemove(editor.controls.erase,"enabled")}function editorPlaceEraser(event){addThing(Eraser,event.x,event.y)}function Eraser(me){me.width=me.height=2,me.nocollide=me.nofall=!0,me.movement=eraserErases,setCharacter(me,"eraser")}function eraserErases(me){if(window.editor){var other,i,placed=editor.placed,arr=placed.concat(solids).concat(characters).concat(scenery);for(i=arr.length-1;i>=0;--i)if(!(other=arr[i]).player&&other!=editor.follower&&objectsTouch(me,other)){killNormal(other),placed.splice(placed.indexOf(other),1);break}killNormal(me)}}function editorControlLoad(){editorCreateInputWindow("Paste your work in progress here, and click Submit to continue it.","",editorSubmitLoad)}function addThingsToPlaced(){var placed=editor.placed;for(editor.placed=(editor.placed||[]).concat(characters).concat(solids).concat(scenery),placed.sort(prethingsorter),placed.splice(placed.indexOf(player),1),i=placed.length-1;i>=0;--i)placer=placed[i],placer.reference=editor[placer.libtype][placer.title]}function editorCreateInputWindow(blurb,value,callback){var bigwidth=gamescreen.unitwidth,div=editor.input_window=createElement("div",{id:"input_window",innerHTML:blurb||"",style:{width:bigwidth+"px"}}),input=div.input=editor.window_input=createElement("textarea",{id:"window_input",value:value||"",style:{width:bigwidth-49+"px"}}),submit=div.submit=createElement("div",{id:"window_submit",className:"window_button",innerText:"Submit",onclick:callback}),cancel=div.cancel=createElement("div",{id:"window_cancel",className:"window_button",innerText:"Cancel",onclick:editorCloseInputWindow});return div.appendChild(input),div.appendChild(submit),div.appendChild(cancel),body.appendChild(div),killNormal(editor.follower=!1),editor.follower=!1,div}function editorCloseInputWindow(noedit){editorPreventClicks(),removeChildSafe(window.input_window,body),noedit||(editorSetCurrentThingFromName(),window.editing=!0),editorUpdateFollower()}function editorClose(inmap){if(window.editor){classRemove(body,"editor"),classRemove(body,"erasing"),killNormal(editor.follower),editor.follower=!1,delete window.editor;var i,ids=["maplines","sidebar","bottombar","scrollers"];for(i in ids)removeChildSafe(document.getElementById(ids[i]),body);document.onmousemove=null,window.editing=!1,inmap&&window.map&&(map.shifting=!1)}}function scrollEditor(xinv,yinv){window.editor&&(editor.follower&&(xinv=xinv||0,yinv=yinv||0,shiftAll(scenery,xinv,yinv),shiftAll(solids,xinv,yinv),shiftAll(characters,xinv,yinv),editor.xloc+=xinv,editor.yloc+=yinv))}function editorStoreLocally(){localStorage.editorLastFunc=editor.rawfunc}function setEditorLocalRetrieval(){localStorage.editorLastFunc&&(editor.rawfunc=round,editorSubmitGameFunc())}function editorSubmitGameFunc(){if(!window.editor||!editor.rawfunc)return loadEditor();editor.rawfunc;var mapfunc=window.custommapfunc=new Function(editor.rawfunc);mapfuncs.Custom={Map:mapfunc},window.canedit=!0,setMap(["Custom","Map"]),window.canedit=editor.playing=!1,entryBlank(player),addThingsToPlaced(),editorStoreLocally(),editorCloseInputWindow()}function editorSubmitGameFuncPlay(){editorPreventClicks(),editorSubmitGameFunc(),editorStartPlaying()}function editorSubmitLoad(){if(window.editor&&editor.window_input){editorPreventClicks();var rawfunc=editor.window_input.value;loadEditor(),editor.rawfunc=rawfunc,editorSubmitGameFunc()}}function editorStartPlaying(){editorPreventClicks(),editor.playing=!0,placePlayer(),entryPlain(player),nokeys=!1;var placer,ref,i,placed=editor.placed;for(i in placed)placer=placed[i],thingRetrieveVelocity(placer),(ref=editor[placer.libtype][placer.title])&&proliferate(placer,ref.onadds);setEditorControls(["Cancel"])}function setEditorLocalRetrieval(){var found=localStorage.editorLastFunc;if(found){editor.rawfunc=found,editorSubmitGameFunc(),editorStoreLocally();var i,placed=editor.placed;for(i in placed)thingStoreVelocity(placed[i])}}